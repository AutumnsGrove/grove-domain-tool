# Worker configuration for grove-domain-search
name = "grove-domain-search"
main = "src/index.ts"
compatibility_date = "2024-11-01"

# Durable Objects binding - SQLite-backed (FREE tier)
[[durable_objects.bindings]]
name = "SEARCH_JOB"
class_name = "SearchJobDO"

# Migrations for Durable Objects
[[migrations]]
tag = "v1"
new_sqlite_classes = ["SearchJobDO"]

# Environment variables (secrets should be set via wrangler secret)
[vars]
ENVIRONMENT = "production"
MAX_BATCHES = "6"
TARGET_RESULTS = "25"

# Development environment
[env.dev]
name = "grove-domain-search-dev"
[env.dev.vars]
ENVIRONMENT = "development"
MAX_BATCHES = "2"

# Secrets to configure:
# - ANTHROPIC_API_KEY: API key for Claude
# - RESEND_API_KEY: API key for email sending
# - KIMI_API_KEY: Optional API key for Kimi K2 (if using parallel providers)
#
# Set with: wrangler secret put ANTHROPIC_API_KEY
